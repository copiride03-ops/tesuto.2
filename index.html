<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ã‚¹ãƒãƒ¼ãƒˆãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤</title>
  <style>
    body {
      margin: 0;
      display: flex;
      height: 100vh;
      background-color: #111;
      font-family: 'Courier New', monospace;
      color: #fff;
      position: relative;
    }

    #left-panel {
      flex: 8.2;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    #right-panel {
      flex: 1.8;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: center;
      padding: 40px;
      text-align: center;
    }

    #date {
      font-size: 1.5em;
      margin-bottom: 5px;
    }

    #time {
      font-size: 4em;
      margin-bottom: 30px;
    }

    .blink {
      animation: fadeSoft 3s ease-in-out infinite;
    }

    @keyframes fadeSoft {
      0%   { opacity: 1; }
      30%  { opacity: 0.2; }
      70%  { opacity: 0.2; }
      100% { opacity: 1; }
    }

    #weather-local {
      font-size: 1.2em;
      white-space: pre-line;
      line-height: 1.6;
      text-align: left;
      font-family: 'Arial', sans-serif;
    }

    #news-container {
      position: relative;
      width: 100%;
      height: 40px;
      overflow: hidden;
      margin-top: 20px;
      font-size: 1.1em;
      background-color: rgba(255,255,255,0.1);
      color: #fff;
      font-family: 'Arial', sans-serif;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #news-slide {
      position: absolute;
      white-space: nowrap;
      transition: transform 0.6s ease;
    }

    .slide-in {
      transform: translateX(100%);
    }

    .slide-active {
      transform: translateX(0%);
    }

    .slide-out {
      transform: translateX(-100%);
    }

    #rss-update-time {
      font-size: 0.9em;
      color: #ccc;
      margin-top: 6px;
    }
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3324395717637447"
     crossorigin="anonymous"></script>
  </style>
</head>
<body>
  <div id="left-panel">
    <div id="player"></div>
  </div>

  <div id="right-panel">
    <div id="date"></div>
    <div id="time"></div>
    <div id="weather-local">ç¾åœ¨åœ°ã®å¤©æ°—å–å¾—ä¸­...</div>
    <div id="news-container">
      <div id="news-slide" class="slide-active">ãƒ‹ãƒ¥ãƒ¼ã‚¹å–å¾—ä¸­...</div>
    </div>
    <div id="rss-update-time">æ›´æ–°æ™‚åˆ»ï¼š--:--</div>
  </div> <!-- å³ãƒ‘ãƒãƒ«ã“ã“ã¾ã§ -->

  <div id="volumeControl">
    éŸ³é‡èª¿æ•´ï¼š
    <input type="range" min="0" max="100" value="0" id="volumeSlider">
    <button id="screenOffButton">ç”»é¢OFF</button>
  </div>

  <div id="screenOffOverlay">
    <button id="restoreButton">ç”»é¢ON</button>
  </div>

  <style>
    #player iframe {
      width: 1920px;
      height: 1080px;
    }

    #volumeControl {
      position: absolute;
      bottom: 8px;
      left: 20px;
      font-size: 1.4em;
      color: #fff;
      background-color: rgba(0, 0, 0, 0.5);
      padding: 12px 24px;
      border-radius: 12px;
      z-index: 10;
      display: flex;
      align-items: center;
      gap: 16px;
    }

    #volumeSlider {
      width: 300px;
      height: 10px;
      margin-left: 10px;
    }

    #screenOffButton {
      font-size: 1em;
      padding: 8px 16px;
      background-color: #444;
      color: #fff;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }

    #screenOffOverlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: #000;
      z-index: 9999;
      display: none;
      justify-content: 20px;
      align-items: flex-end;
      padding-bottom: 60px;
    }

    #restoreButton {
      font-size: 1.5em;
      padding: 12px 24px;
      background-color: #444;
      color: #fff;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
  </style>
<script>
  function updateClock() {
    const now = new Date();
    const yyyy = now.getFullYear();
    const mm = String(now.getMonth() + 1).padStart(2, '0');
    const dd = String(now.getDate()).padStart(2, '0');
    const hh = String(now.getHours()).padStart(2, '0');
    const min = String(now.getMinutes()).padStart(2, '0');
    const weekdays = ["SUN", "MON", "TUE", "WED", "THU", "FRI", "SAT"];
    const dayLabel = weekdays[now.getDay()];
    document.getElementById("date").textContent = `${yyyy}.${mm}.${dd} ${dayLabel}`;
    document.getElementById("time").innerHTML = `${hh}<span class="blink">:</span>${min}`;
  }

  function getWeatherInfo(code) {
    const map = {
      0: { text: "å¿«æ™´", emoji: "â˜€ï¸" },
      1: { text: "æ™´ã‚Œ", emoji: "â˜€ï¸" },
      2: { text: "è–„æ›‡ã‚Š", emoji: "ğŸŒ¤ï¸" },
      3: { text: "æ›‡ã‚Š", emoji: "â˜ï¸" },
      45: { text: "éœ§", emoji: "ğŸŒ«ï¸" },
      48: { text: "éœ§ï¼ˆéœ§é›¨ï¼‰", emoji: "ğŸŒ«ï¸" },
      51: { text: "å¼±ã„éœ§é›¨", emoji: "ğŸŒ¦ï¸" },
      53: { text: "ä¸­ç¨‹åº¦ã®éœ§é›¨", emoji: "ğŸŒ¦ï¸" },
      55: { text: "å¼·ã„éœ§é›¨", emoji: "ğŸŒ¦ï¸" },
      61: { text: "å¼±ã„é›¨", emoji: "ğŸŒ§ï¸" },
      63: { text: "ä¸­ç¨‹åº¦ã®é›¨", emoji: "ğŸŒ§ï¸" },
      65: { text: "å¼·ã„é›¨", emoji: "ğŸŒ§ï¸" },
      80: { text: "ã«ã‚ã‹é›¨", emoji: "ğŸŒ¦ï¸" },
      95: { text: "é›·é›¨", emoji: "â›ˆï¸" },
      99: { text: "æ¿€ã—ã„é›·é›¨", emoji: "â›ˆï¸" }
    };
    return map[code] || { text: "ä¸æ˜", emoji: "â“" };
  }

  function fetchCityName(lat, lon) {
    const apiKey = "548193a00baa409288c52311e46b17af";
    const url = `https://api.opencagedata.com/geocode/v1/json?q=${lat}+${lon}&key=${apiKey}&language=ja`;
    return fetch(url)
      .then(res => res.json())
      .then(data => {
        const comp = data.results[0].components;
        return comp.city || comp.town || comp.village || "ä¸æ˜ãªå ´æ‰€";
      });
  }

  function fetchWeatherLocal() {
    navigator.geolocation.getCurrentPosition(
      (position) => {
        const lat = position.coords.latitude;
        const lon = position.coords.longitude;
        const weatherURL = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&daily=weathercode,temperature_2m_max,temperature_2m_min&timezone=Asia%2FTokyo`;
        Promise.all([
          fetch(weatherURL).then(res => res.json()),
          fetchCityName(lat, lon)
        ])
        .then(([weatherData, cityName]) => {
          const todayCode = weatherData.daily.weathercode[0];
          const todayMax = weatherData.daily.temperature_2m_max[0];
          const todayMin = weatherData.daily.temperature_2m_min[0];
          const todayInfo = getWeatherInfo(todayCode);
          document.getElementById("weather-local").textContent =
            `ç¾åœ¨åœ°ï¼š${cityName}\nä»Šæ—¥ã®å¤©æ°—ï¼š${todayInfo.text} ${todayInfo.emoji}\næ°—æ¸©ï¼š${todayMax}â„ƒ / ${todayMin}â„ƒ`;
        })
        .catch(() => {
          document.getElementById("weather-local").textContent = "å¤©æ°—å–å¾—å¤±æ•—";
        });
      },
      () => {
        document.getElementById("weather-local").textContent = "ä½ç½®æƒ…å ±ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ";
      }
    );
  }
</script>
<script>
  const playlistId = 'PLKeSkVQhqoOpj9M8ic2i0E_yo0HTb6ij7';
  let player;
  let tag = document.createElement('script');
  tag.src = "https://www.youtube.com/iframe_api";
  document.body.appendChild(tag);

  function onYouTubeIframeAPIReady() {
    player = new YT.Player('player', {
      height: '100%',
      width: '100%',
      playerVars: {
        autoplay: 1,
        controls: 0,
        mute: 1,
        loop: 1,
        listType: 'playlist',
        list: playlistId
      },
      events: {
        onReady: function () {
          const slider = document.getElementById("volumeSlider");
          player.setVolume(slider.value);
        }
      }
    });
  }

  document.getElementById("volumeSlider").addEventListener("input", function () {
    if (player && player.setVolume) {
      player.setVolume(this.value);
      if (this.value > 0) player.unMute();
    }
  });

  document.getElementById("screenOffButton").addEventListener("click", () => {
    document.getElementById("screenOffOverlay").style.display = "flex";
  });

  document.getElementById("restoreButton").addEventListener("click", () => {
    document.getElementById("screenOffOverlay").style.display = "none";
  });

  window.onload = () => {
    updateClock();
    setInterval(updateClock, 1000);           // æ¯ç§’æ™‚è¨ˆæ›´æ–°
    fetchWeatherLocal();
    setInterval(fetchWeatherLocal, 7200000);  // 2æ™‚é–“ã”ã¨ã«å¤©æ°—æ›´æ–°
  };
</script>
</body>
</html>
